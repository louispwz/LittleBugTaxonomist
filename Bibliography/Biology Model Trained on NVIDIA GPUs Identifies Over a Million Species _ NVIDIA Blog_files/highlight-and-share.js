/*! For license information please see highlight-and-share.js.LICENSE.txt */
(()=>{"use strict";var e;function t(t,n){return e||(e=function(e){for(var t="atchesSelector",n=0,o=["matches","m".concat(t),"webkitM".concat(t),"mozM".concat(t),"msM".concat(t),"oM".concat(t)];n<o.length;n++){var r=o[n];if(e[r])return r}}(t)),t[e](n)}function n(e,n){for(var o=e;o&&(1!==o.nodeType||!t(o,n));)o=o.parentNode;return o}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(){var e,t,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function l(n,o,r,a){var l=o&&o.prototype instanceof c?o:c,h=Object.create(l.prototype);return i(h,"_invoke",function(n,o,r){var i,a,l,c=0,h=r||[],u=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,a=0,l=e,d.n=n,s}};function f(n,o){for(a=n,l=o,t=0;!u&&c&&!r&&t<h.length;t++){var r,i=h[t],f=d.p,p=i[2];n>3?(r=p===o)&&(l=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=f&&((r=n<2&&f<i[1])?(a=0,d.v=o,d.n=i[1]):f<p&&(r=n<3||i[0]>o||o>p)&&(i[4]=n,i[5]=o,d.n=p,a=0))}if(r||n>1)return s;throw u=!0,o}return function(r,h,p){if(c>1)throw TypeError("Generator is already running");for(u&&1===h&&f(h,p),a=h,l=p;(t=a<2?e:l)||!u;){i||(a?a<3?(a>1&&(d.n=-1),f(a,l)):d.n=l:d.v=l);try{if(c=2,i){if(a||(r="next"),t=i[r]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),a=1);i=e}else if((t=(u=d.n<0)?l:n.call(o,d))!==s)break}catch(t){i=e,a=1,l=t}finally{c=1}}return{value:t,done:u}}}(n,r,a),!0),h}var s={};function c(){}function h(){}function u(){}t=Object.getPrototypeOf;var d=[][o]?t(t([][o]())):(i(t={},o,function(){return this}),t),f=u.prototype=c.prototype=Object.create(d);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,i(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return h.prototype=u,i(f,"constructor",u),i(u,"constructor",h),h.displayName="GeneratorFunction",i(u,a,"GeneratorFunction"),i(f),i(f,a,"Generator"),i(f,o,function(){return this}),i(f,"toString",function(){return"[object Generator]"}),(r=function(){return{w:l,m:p}})()}function i(e,t,n,o){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}i=function(e,t,n,o){function a(t,n){i(e,t,function(e){return this._invoke(t,n,e)})}t?r?r(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},i(e,t,n,o)}function a(e,t,n,o,r,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(o,r)}!function(){var e=highlight_and_share,t=e.prefix,i=e.suffix,l=e.content_legacy_mode,s=null,c=document.querySelector("#has-highlight-and-share");if(null!==c){var h=c.querySelector(".highlight-and-share-wrapper").getBoundingClientRect(),u=h.width,d=(h.height,function(e){var t=window.getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility&&"0"!==t.opacity}),f=function(){var e=document.querySelectorAll(".highlight-and-share-wrapper");null!==e&&e.forEach(function(e){null===e.closest("#has-highlight-and-share")&&e.remove()})},p=function(n,r,a,l,s){var h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(!1!==highlight_and_share.show_twitter||!1!==highlight_and_share.show_facebook||!1!==highlight_and_share.show_linkedin||!1!==highlight_and_share.show_ok||!1!==highlight_and_share.show_vk||!1!==highlight_and_share.show_pinterest||!1!==highlight_and_share.show_email||!1!==highlight_and_share.show_webshare||!1!==highlight_and_share.show_mastodon){f();var u=c.querySelector(".highlight-and-share-wrapper").cloneNode(!0);if(u.style.display="block",u.style.position="absolute",u.style.width="auto",u.style.height="auto",u.style["z-index"]=1e4,u.classList.contains("orientation-vertical")&&(u.style.display="inline-flex"),function(n,o,r,a,l,s){var c=n.querySelectorAll(".has_whatsapp, .has_facebook, .has_twitter, .has_copy, .has_reddit, .has_telegram, .has_linkedin, .has_xing, .has_signal, .has_vk, .has_tumblr, .has_mastodon, .has_email_mailto, .has_email_form, .has_threads, .has_bluesky, .has_webshare");if(null===c)return n;var h="";"inline"===s?h="highlight":"selection"===s?h="selection":"cta"===s&&(h="quote"),c.forEach(function(n){var s=n.querySelector("a"),c=s.getAttribute("href");c=(c=(c=(c=(c=(c=(c=(c=(c=(c=c.replace("%url%",encodeURIComponent(o))).replace("%username%",encodeURIComponent(e.twitter_username))).replace("%title%",encodeURIComponent(r))).replace("%text%",encodeURIComponent(a))).replace("%hashtags%",encodeURIComponent(l))).replace("%type%",encodeURIComponent(h))).replace("%threadstext%","%prefix%"+encodeURIComponent(a)+"%suffix%"+encodeURIComponent("\n\n"+o))).replace("%blueskytext%","%prefix%"+encodeURIComponent(a)+"%suffix%"+encodeURIComponent("\n\n"+o))).replace("%prefix%",encodeURIComponent(t))).replace("%suffix%",encodeURIComponent(i)),s.setAttribute("href",c);var u=n.getAttribute("data-title");null!==u&&(u=u.replace("%title%",encodeURIComponent(r)),n.setAttribute("data-title",u));var d=n.getAttribute("data-url");null!==d&&(d=d.replace("%url%",encodeURIComponent(o)),n.setAttribute("data-url",d))})}(u,a,r,n,l,s),void 0!==navigator.share){var p=u.querySelector(".has_webshare");null!==p&&(p.style.display="inline-block")}switch(document.body.appendChild(u),s){case"selection":case"comments":g(u,h);break;case"inline":m(u,h);break;case"cta":v(u,h)}var y=document.querySelector("body").querySelectorAll(".has_whatsapp, .has_facebook, .has_twitter, .has_telegram, .has_linkedin, .has_xing, .has_reddit, .has_tumblr");null!==y&&y.forEach(function(e){d(e)&&e.querySelector("a").addEventListener("click",function(t){t.preventDefault();var o=e.querySelector("a").getAttribute("href");"undefined"!=typeof dataLayer&&dataLayer.push({event:"highlight-and-share",hasShareText:n,hasSharePostUrl:a,hasSharePostTitle:r,hasShareType:s,hasSocialNetwork:e.getAttribute("data-type")}),window.open(o,"Highlight and Share","width=575,height=430,toolbar=false,menubar=false,location=false,status=false")})});var w=document.querySelectorAll(".has_copy");null!==w&&w.forEach(function(e){d(e)&&("undefined"==typeof ClipboardItem?e.remove():e.addEventListener("click",function(t){t.preventDefault();try{var i=new Blob([n],{type:"text/plain"}),l=[new ClipboardItem((c={},h=i.type,u=i,(h=function(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}(h))in c?Object.defineProperty(c,h,{value:u,enumerable:!0,configurable:!0,writable:!0}):c[h]=u,c))];navigator.clipboard.write(l)}catch(c){}var c,h,u;e.setAttribute("data-tooltip","Copied!"),"undefined"!=typeof dataLayer&&dataLayer.push({event:"highlight-and-share",hasShareText:n,hasSharePostUrl:a,hasSharePostTitle:r,hasShareType:s,hasSocialNetwork:"copy"})}))});var b=document.querySelectorAll(".has_email_form");null!==b&&b.forEach(function(e){d(e)&&e.addEventListener("click",function(e){e.preventDefault();var t=e.target.closest("a").getAttribute("href");"undefined"!=typeof Fancybox&&(f(),window.highlightShareFancy=new Fancybox([{src:t,type:"iframe",preload:!0,compact:!0,autoFocus:!0}],{Toolbar:{autoEnable:!1}}))})});var _=document.querySelectorAll(".has_mastodon");null!==_&&_.forEach(function(e){d(e)&&e.addEventListener("click",function(e){e.preventDefault();var t=e.target.closest("a").getAttribute("href");"undefined"!=typeof Fancybox&&(f(),window.highlightShareFancy=new Fancybox([{type:"inline",compact:!0,src:"#has-mastodon-prompt"}],{Toolbar:{autoEnable:!1},on:{done:function(){var e=document.querySelector(".has-mastodon-form"),n=e.querySelector("input");null!==n&&n.focus(),e.addEventListener("submit",function(e){e.preventDefault();var o=n.value;localStorage.setItem("highlight-and-share-mastodon",o);var r=t;""!==o&&(r=r.replace(/mastodon\.social/i,o)),console.log(r),window.open(r,"Highlight and Share","width=575,height=430,toolbar=false,menubar=false,location=false,status=false")});var o=localStorage.getItem("highlight-and-share-mastodon");null!==o&&(n.value=o)}}}))})});var x=document.querySelectorAll(".has_webshare");null!==x&&x.forEach(function(e){d(e)&&e.addEventListener("click",function(e){e.preventDefault();var t=e.target.closest("a").getAttribute("href");navigator.share({title:r,text:n,url:t})})})}},g=function(e,t){var n=window.innerWidth,o=window.innerHeight,r=y(t).getBoundingClientRect(),i=r.top,a=r.left,l=r.width,s=r.height;e.offsetWidth>n&&(e.style.maxWidth=n-20+"px",e.classList.add("has-no-margin-bottom"));var c=e.getBoundingClientRect(),h=c.width,d=c.height;if(e.classList.contains("orientation-vertical")){var f=a+window.scrollX-(h+15),p=i+window.scrollY-d/2+s/2;if(e.classList.add("has-no-margin-bottom"),i+window.scrollY-d/2<0){e.style.display="grid",e.style.gridTemplateColumns="1fr 1fr";var g=e.getBoundingClientRect();e.style.top=i+window.scrollY-g.height/2+s/2+"px",e.style.left=a+window.scrollX-g.width-15+"px"}else if(i+d>o){e.style.display="grid",e.style.gridTemplateColumns="1fr 1fr";var m=e.getBoundingClientRect();e.style.top=i+window.scrollY-m.height/2+s/2+"px",e.style.left=a+window.scrollX-m.width-15+"px"}else e.style.left=f+"px",e.style.top=p+"px",e.classList.remove("has-no-margin-bottom")}else{var v=a+window.scrollX+l/2-h/2,w=i+window.scrollY-d-15;e.classList.add("has-no-margin-bottom"),v<0?e.style.left="15px":v+u>n?e.style.right="15px":(e.style.left=v+"px",e.classList.remove("has-no-margin-bottom")),e.style.top=w+"px"}},m=function(e,t){var n=window.innerWidth,o=window.innerHeight,r=t.getBoundingClientRect(),i=r.top,a=r.left,l=r.width,s=r.height,c=e.getBoundingClientRect(),h=c.width,d=c.height;if(e.classList.contains("orientation-vertical")){var f=a+window.scrollX-(h+15),p=i+window.scrollY-d/2+s/2;if(e.classList.add("has-no-margin-bottom"),i+window.scrollY-d/2<0){e.style.display="grid",e.style.gridTemplateColumns="1fr 1fr";var g=e.getBoundingClientRect();e.style.top=i+window.scrollY-g.height/2+s/2+"px";var m=a+window.scrollX-g.width-15;e.style.left=m<0?"15px":m+"px"}else if(i+d>o){e.style.display="grid",e.style.gridTemplateColumns="1fr 1fr";var y=e.getBoundingClientRect();e.style.top=i+window.scrollY-y.height/2+s/2+"px";var v=a+window.scrollX-y.width-15;e.style.left=v<0?"15px":v+"px"}else e.style.left=f+"px",e.style.top=p+"px",e.classList.remove("has-no-margin-bottom")}else{var w=a+window.scrollX+l/2-h/2,b=i+window.scrollY-d-15;e.classList.add("has-no-margin-bottom"),w<0?e.style.left="15px":w+u>n?e.style.right="15px":(e.style.left=w+"px",e.classList.remove("has-no-margin-bottom")),e.style.top=b+"px"}},y=function(e){var t=document.defaultView.getSelection(),o=t.rangeCount&&t.getRangeAt(0);if(o){var r=function(e,t){var o=e.cloneRange();if(e.collapsed||!t)return o;var r=n(e.startContainer,t);return r?function(e,t){var n=e.compareDocumentPosition(t);return!n||(16&n)>0}(r,e.endContainer)||o.setEnd(r,r.childNodes.length):(r=n(e.endContainer,t))?o.setStart(r,0):o.collapse(),o}(o,e);if(!r.collapsed&&r.getClientRects().length)return r}},v=function(e,t){var n=window.innerWidth,o=window.innerHeight,r=t.getBoundingClientRect(),i=r.top,a=r.left,l=r.width,s=r.height;e.getBoundingClientRect().width>n&&(e.style.maxWidth=n-20+"px",e.classList.add("has-no-margin-bottom"));var c=e.getBoundingClientRect(),h=c.width,d=c.height;if(e.classList.contains("orientation-vertical")){window.scrollX;var f=i+window.scrollY-d/2+s/2;if(e.classList.add("has-no-margin-bottom"),i+window.scrollY-d/2<0){e.style.display="grid",e.style.gridTemplateColumns="1fr 1fr";var p=e.getBoundingClientRect();e.style.top=i+window.scrollY-p.height/2+s/2+"px";var g=a+window.scrollX-p.width-15;e.style.left=g<0?"15px":g+"px"}else if(i+d>o){e.style.display="grid",e.style.gridTemplateColumns="1fr 1fr";var m=e.getBoundingClientRect();e.style.top=i+window.scrollY-m.height/2+s/2+"px";var y=a+window.scrollX-m.width-15;e.style.left=y<0?"15px":y+"px"}else{var v=e.getBoundingClientRect();e.style.left=a+window.scrollX-v.width-15+"px",e.style.top=f+"px",e.classList.remove("has-no-margin-bottom")}}else{var w=a+window.scrollX+l/2-h/2,b=i+window.scrollY-d-15;e.classList.add("has-no-margin-bottom"),w<0?e.style.left="15px":w+u>n?e.style.right="15px":(e.style.left=w+"px",e.classList.remove("has-no-margin-bottom")),e.style.top=b+"px"}},w=function(e){var t=null!==e?e.dataset.url:window.location.href,n=null!==e?e.dataset.title:document.title,o=null!==e?e.dataset.hashtags:"",r={};return r.href=t,r.title=n,r.hashtags=o,r},b=e.content;if(""!==b){var _=document.querySelectorAll(b);if(null!==_){var x=function(e,t){f();var n=document.defaultView.getSelection().toString().trim();if(""!==n){var o=t.querySelector(".has-social-placeholder"),r=w(o),i=r.href,a=r.title,l=r.hashtags;p(n,a,i,l,"selection")}};_.forEach(function(e){!e.classList.contains("has-content-area")||l?e.addEventListener("mouseup",function(t){x(0,e)}):["selectionchange","mouseup","touchend","touchcancel"].forEach(function(t){e.parentElement.addEventListener(t,function(t){x(0,e.parentElement)})})})}var S=document.querySelectorAll(".has-inline-text");null!==S&&S.forEach(function(t){highlight_and_share.inline_highlight_tooltips_enabled&&""!==highlight_and_share.inline_highlight_tooltips_text&&t.setAttribute("data-tooltip",highlight_and_share.inline_highlight_tooltips_text),t.addEventListener("click",function(n){!function(t,n){if(f(),n!==s){s=n;var o=n.innerText.trim();if(""!==o){var r=t.target.closest(".has-social-placeholder"),i=w(r),a=i.href,l=i.title,c=i.hashtags;e.enable_webshare_inline_highlight&&"function"==typeof navigator.share?navigator.share({title:l,url:a,text:o}):p(o,l,a,c,"inline",n)}}else s=null}(n,t);var o=document.querySelectorAll(".has-inline-text-tooltip");null!==o&&o.forEach(function(e){e.remove()})}),t.addEventListener("mouseover",function(e){if(t.hasAttribute("data-tooltip")){var n=e.target.getBoundingClientRect().top,o=window.scrollX,r=window.scrollY,i=e.clientX-60+o,a=n-30+r-10,l=document.createElement("div");l.classList.add("has-inline-text-tooltip"),l.style.position="absolute",l.style.left=i+"px",l.style.top=a+"px",l.innerText=t.getAttribute("data-tooltip"),document.body.appendChild(l);var s=l.getBoundingClientRect();s.right>window.innerWidth?l.style.left=i-(s.right-window.innerWidth)+"px":s.left<0&&(l.style.left=i-s.left+"px"),s.bottom>window.innerHeight?l.style.top=a-(s.bottom-window.innerHeight)+"px":s.top<0&&(l.style.top=a-s.top+"px")}}),t.addEventListener("mouseout",function(){var e=document.querySelectorAll(".has-inline-text-tooltip");null!==e&&e.forEach(function(e){e.classList.add("has-fade-out"),setTimeout(function(){e.remove()},900)})})});var C=document.querySelectorAll(".has-click-prompt");null!==C&&C.forEach(function(t){t.addEventListener("click",function(n){if(n.preventDefault(),f(),t!==s){s=t;var o=t.parentNode.querySelector(".has-click-to-share-text").getAttribute("data-text-full"),r=t.closest(".has-social-placeholder"),i=w(r),a=i.href,l=i.title,c=i.hashtags;e.enable_webshare_click_to_share&&"function"==typeof navigator.share?navigator.share({title:l,url:a,text:o}):p(o,l,a,c,"cta",t.closest(".has-click-to-share"))}else s=null})});var A=function(){var e=document.querySelectorAll(".has-comment-placeholder");null!==e&&e.forEach(function(e){["selectionchange","mouseup","touchend","touchcancel"].forEach(function(t){e.parentElement.addEventListener(t,function(t){!function(e,t){f();var n=document.defaultView.getSelection().toString().trim();if(""!==n){var o=t.querySelector(".has-comment-placeholder"),r=o.getAttribute("data-comment-url"),i=o.getAttribute("data-title");p(n,i,r,"","comments")}}(0,e.parentElement)})})})};if(document.addEventListener("wpacAfterUpdateComments",A),A(),document.addEventListener("keydown",function(e){"Escape"===e.key&&f()}),void 0!==navigator.share){var E=document.querySelectorAll(".has-pin-svg-webshare");null!==E&&E.forEach(function(e){e.style.display="inline-block"})}var L=document.querySelectorAll(".has-pin-svg-pinterest");null!==L&&L.forEach(function(e){e.style.display="inline-block"});var k=document.querySelectorAll(".has-pin-svg-pinterest");null!==k&&k.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var t=e.target.closest(".has-pin-image-wrapper");if(null!==t){var n=t.querySelector("img"),o=n.getAttribute("src"),r=n.getAttribute("data-pin-url"),i=n.getAttribute("alt"),a=n.getAttribute("data-pin-description"),l=window.location.href,s=document.querySelector(".has-social-placeholder");null!==s&&(l=w(s).href);var c=n.closest("a");if(null!==c){var h,u=c.getAttribute("href");u.match(/\.(jpeg|jpg|gif|png)$/i)&&(o=u,i=null!==(h=c.getAttribute("title"))&&void 0!==h?h:i)}"undefined"!=typeof dataLayer&&dataLayer.push({event:"highlight-and-share",hasSharePostUrl:o,hasSharePostTitle:i,hasShareType:"image",hasSocialNetwork:"pinterest"}),window.open("https://www.pinterest.com/pin/create/button/?url="+encodeURIComponent(l)+"&media="+encodeURIComponent(null!=r?r:o)+"&description="+encodeURIComponent(null!=a?a:i),"Highlight and Share","width=575,height=430,toolbar=false,menubar=false,location=false,status=false")}})});var R=document.querySelectorAll(".has-pin-svg-webshare");null!==R&&R.forEach(function(e){e.addEventListener("click",function(){var e,t=(e=r().m(function e(t){var n,o,i,a,l,s,c,h,u,d,f,p,g,m,y;return r().w(function(e){for(;;)switch(e.n){case 0:if(t.preventDefault(),null!==(n=t.target.closest(".has-pin-image-wrapper"))){e.n=1;break}return e.a(2);case 1:return o=n.querySelector("img"),i=o.getAttribute("src"),a=o.getAttribute("data-pin-url"),l=o.getAttribute("alt"),s=o.getAttribute("data-pin-description"),c=window.location.href,null!==(h=document.querySelector(".has-social-placeholder"))&&(u=w(h),d=u.href,c=d),null!==(f=o.closest("a"))&&(p=f.getAttribute("href")).match(/\.(jpeg|jpg|gif|png)$/i)&&(i=p,l=null!==(g=f.getAttribute("title"))&&void 0!==g?g:l),"undefined"!=typeof dataLayer&&dataLayer.push({event:"highlight-and-share",hasSharePostUrl:null!=a?a:c,hasSharePostTitle:null!=s?s:l,hasShareType:"image",hasSocialNetwork:"webshare"}),m=i.split(".").pop().toLowerCase().split("?")[0],e.n=2,fetch(i).then(function(e){return e.blob()}).then(function(e){return new File([e],"image.".concat(m),{type:"image/"+m})});case 2:y=e.v,highlight_and_share.enable_webshare_image_only?navigator.share({title:null!=s?s:l,text:null!=s?s:l,files:[y]}):navigator.share({title:null!=s?s:l,text:null!=s?s:l,files:[y],url:null!=a?a:c});case 3:return e.a(2)}},e)}),function(){var t=this,n=arguments;return new Promise(function(o,r){var i=e.apply(t,n);function l(e){a(i,o,r,l,s,"next",e)}function s(e){a(i,o,r,l,s,"throw",e)}l(void 0)})});return function(e){return t.apply(this,arguments)}}())})}}}()})();